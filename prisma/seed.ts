import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcryptjs'

const prisma = new PrismaClient()

async function main() {
  console.log('Seeding database...')

  // Create admin user
  const hashedPassword = await bcrypt.hash('admin123', 12)

  const admin = await prisma.user.upsert({
    where: { email: 'admin@puma.com' },
    update: {},
    create: {
      email: 'admin@puma.com',
      password: hashedPassword,
      name: 'Administrador',
      role: 'admin',
    },
  })

  console.log('Admin user created:', admin.email)

  // Create settings
  await prisma.settings.upsert({
    where: { id: 'settings' },
    update: {},
    create: {
      id: 'settings',
      companyName: 'Puma Multimarcas',
      description: 'Revendedora de confiança de Carros de Matão e região',
      email: 'pumamultimarcas@yahoo.com',
      phone: '(16) 2016-2615',
      whatsapp: '(16) 99253-7016',
      address: 'Av. Rincão, 471 – Jardim Buscardi, Matão – SP, 15991-210',
      workingHours: 'Segunda a Sexta: 09:00 às 18:00 | Sábado: 09:00 às 13:00',
      facebook: 'https://www.facebook.com/PumaMultimarcas',
      instagram: 'https://www.instagram.com/puma_multimarcas_',
    },
  })

  console.log('Settings created')

  // Create sellers
  const sellers = [
    { name: 'Maylon', phone: '(16) 99253-7016', whatsapp: '16992537016' },
    { name: 'Diego', phone: '(16) 99317-6275', whatsapp: '16993176275' },
    { name: 'Vinicius', phone: '(16) 99622-1011', whatsapp: '16996221011' },
    { name: 'Deyvis', phone: '(16) 99312-3344', whatsapp: '16993123344' },
    { name: 'Marcelo', phone: '(16) 99747-9719', whatsapp: '16997479719' },
    { name: 'Leo', phone: '(16) 99265-5601', whatsapp: '16992655601' },
  ]

  for (const [index, seller] of sellers.entries()) {
    await prisma.seller.upsert({
      where: { id: seller.name.toLowerCase() },
      update: {},
      create: {
        id: seller.name.toLowerCase(),
        name: seller.name,
        phone: seller.phone,
        whatsapp: seller.whatsapp,
        order: index,
      },
    })
  }

  console.log('Sellers created')

  // Create initial banners
  await prisma.banner.deleteMany()

  const banners = [
    {
      title: 'Puma Multimarcas',
      subtitle: 'Os melhores seminovos de Matão e região',
      imageUrl: 'https://pumamultimarcasmatao.com.br/wp-content/uploads/2022/08/1puma.jpeg',
      link: '/carros',
      active: true,
      order: 0,
    },
    {
      title: 'Qualidade e Confiança',
      subtitle: 'Mais de 20 anos no mercado automotivo',
      imageUrl: 'https://pumamultimarcasmatao.com.br/wp-content/uploads/2022/08/2puma.jpeg',
      link: '/sobre',
      active: true,
      order: 1,
    },
  ]

  for (const bannerData of banners) {
    await prisma.banner.create({ data: bannerData })
  }

  console.log('Banners created')

  // Delete existing vehicles
  await prisma.vehicleOptional.deleteMany()
  await prisma.vehicleImage.deleteMany()
  await prisma.vehicle.deleteMany()

  // Create real vehicles from Puma Multimarcas
  const vehicles = [
    {
      brand: 'Honda',
      model: 'Civic',
      version: 'LXS 1.8',
      year: 2014,
      price: 71900,
      mileage: 209000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'sedan',
      color: 'Prata',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/WhatsApp-Image-2026-02-18-at-09.37.22-1-768x1365.jpeg'],
    },
    {
      brand: 'Fiat',
      model: 'Toro',
      version: 'Freedom 2.0 4x4',
      year: 2019,
      price: 100000,
      mileage: 128200,
      fuel: 'diesel',
      transmission: 'automatico',
      bodyType: 'picape',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/WhatsApp-Image-2026-02-06-at-14.43.35-768x1365.jpeg'],
    },
    {
      brand: 'Fiat',
      model: 'Doblo',
      version: 'Attractive 1.4',
      year: 2016,
      price: 54999,
      mileage: 222300,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'minivan',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/WhatsApp-Image-2026-02-06-at-11.42.42-768x1365.jpeg'],
    },
    {
      brand: 'Fiat',
      model: 'Palio',
      version: 'Essence 1.6',
      year: 2013,
      price: 40999,
      mileage: 160600,
      fuel: 'flex',
      transmission: 'automatizado',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/WhatsApp-Image-2026-02-06-at-11.25.12-768x1365.jpeg'],
    },
    {
      brand: 'Citroën',
      model: 'C3 Aircross',
      version: 'GLX 1.6',
      year: 2014,
      price: 42999,
      mileage: 96100,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'crossover',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/WhatsApp-Image-2026-02-05-at-15.41.10-768x1365.jpeg'],
    },
    {
      brand: 'Jeep',
      model: 'Renegade',
      version: 'Longitude T270 1.3',
      year: 2024,
      price: 118000,
      mileage: 47100,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'suv',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/WhatsApp-Image-2026-02-05-at-15.28.20-768x1365.jpeg'],
    },
    {
      brand: 'Ford',
      model: 'Fiesta',
      version: '1.0 Flex',
      year: 2010,
      price: 25999,
      mileage: 150000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/WhatsApp-Image-2026-02-05-at-15.38.56-768x1365.jpeg'],
    },
    {
      brand: 'Ford',
      model: 'Fiesta',
      version: '1.0 Flex',
      year: 2012,
      price: 30990,
      mileage: 147400,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/a62b307f-4418-435f-add3-3444c6eaf321-768x1365.jfif'],
    },
    {
      brand: 'Chevrolet',
      model: 'S10',
      version: '2.4 LTZ 4x2',
      year: 2014,
      price: 95000,
      mileage: 150300,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'picape',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/30a0a228-c063-4faa-9b5d-8b1c7aeeb357-768x1365.jfif'],
    },
    {
      brand: 'Volkswagen',
      model: 'Up',
      version: 'Pepper 1.0 TSI',
      year: 2018,
      price: 68999,
      mileage: 146000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/16110f2c-853f-4881-8eea-44ebe9cda9bc-768x1365.jfif'],
    },
    {
      brand: 'Chevrolet',
      model: 'Onix',
      version: 'LTZ 1.0',
      year: 2024,
      price: 89990,
      mileage: 28300,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'hatch',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/b8939ee1-22c2-40d5-9f1d-6c322829439c-1-768x1365.jfif'],
    },
    {
      brand: 'Volkswagen',
      model: 'Virtus',
      version: '1.0 TSI',
      year: 2022,
      price: 91990,
      mileage: 58500,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'sedan',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/c99c798e-231e-48e0-bb0a-29654de56cfc-768x1365.jfif'],
    },
    {
      brand: 'Hyundai',
      model: 'HB20',
      version: '1.0 TGDI',
      year: 2024,
      price: 91999,
      mileage: 49400,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'hatch',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/5880b832-4113-43a1-950f-8fa185f931f9-768x1365.jfif'],
    },
    {
      brand: 'Volkswagen',
      model: 'T-Cross',
      version: '1.0 TSI',
      year: 2024,
      price: 112990,
      mileage: 47200,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'suv',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/7cd5d8c4-90aa-477c-a8f7-adaf236a979c-768x1365.jfif'],
    },
    {
      brand: 'Chevrolet',
      model: 'Spin',
      version: '1.8 Premier 7 Lugares',
      year: 2023,
      price: 93990,
      mileage: 52800,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'minivan',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/5fd16a5b-b892-4114-b738-7ee66e37b51e-768x1365.jfif'],
    },
    {
      brand: 'Ford',
      model: 'Ranger',
      version: 'XLT 3.2 4x4',
      year: 2022,
      price: 170000,
      mileage: 125200,
      fuel: 'diesel',
      transmission: 'automatico',
      bodyType: 'picape',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/02/f58c6b1c-9242-431b-8bb4-4494ae325504-768x1365.jfif'],
    },
    {
      brand: 'Volkswagen',
      model: 'Gol',
      version: '1.6 Power',
      year: 2005,
      price: 27990,
      mileage: 196000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/gol-power-2005-4-768x1024.jfif'],
    },
    {
      brand: 'Fiat',
      model: 'Toro',
      version: '1.8',
      year: 2019,
      price: 86990,
      mileage: 135600,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'picape',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/toro-2019-9-768x1024.jfif'],
    },
    {
      brand: 'Jeep',
      model: 'Renegade',
      version: '2.0 Diesel',
      year: 2016,
      price: 82990,
      mileage: 93200,
      fuel: 'diesel',
      transmission: 'automatico',
      bodyType: 'suv',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/renegade-2016-5-768x1024.jfif'],
    },
    {
      brand: 'Jeep',
      model: 'Renegade',
      version: '2.0 Diesel',
      year: 2020,
      price: 99990,
      mileage: 124500,
      fuel: 'diesel',
      transmission: 'automatico',
      bodyType: 'suv',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/903d817b-0abc-4a6c-87ec-40b9b399c303-768x1024.jfif'],
    },
    {
      brand: 'Nissan',
      model: 'March',
      version: '1.6',
      year: 2013,
      price: 37990,
      mileage: 155000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/f600efc0-4f93-45ad-9023-6519def286d7-768x1024.jfif'],
    },
    {
      brand: 'Citroën',
      model: 'Xsara Picasso',
      version: 'GLX 1.6',
      year: 2011,
      price: 25999,
      mileage: 184000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'minivan',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/cc80c176-a83e-40fc-ba3b-8009dcafc39a-768x1024.jfif'],
    },
    {
      brand: 'Kia',
      model: 'Sorento',
      version: '3.5 V6',
      year: 2013,
      price: 74900,
      mileage: 173000,
      fuel: 'gasolina',
      transmission: 'automatico',
      bodyType: 'suv',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/027fe802-ab1b-4c43-9001-b3ea1f88d7cd-768x1024.jfif'],
    },
    {
      brand: 'Toyota',
      model: 'Corolla',
      version: 'XEI 2.0',
      year: 2013,
      price: 70900,
      mileage: 248000,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'sedan',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/corolla-6-768x1024.jfif'],
    },
    {
      brand: 'Ford',
      model: 'EcoSport',
      version: 'SE 1.5',
      year: 2019,
      price: 70900,
      mileage: 119000,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'suv',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/ecosport-4-768x1024.jfif'],
    },
    {
      brand: 'Hyundai',
      model: 'IX35',
      version: '2.0',
      year: 2013,
      price: 69900,
      mileage: 183000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'suv',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/ix35-6-768x1024.jfif'],
    },
    {
      brand: 'Chevrolet',
      model: 'Zafira',
      version: 'Elite 2.0',
      year: 2011,
      price: 44900,
      mileage: 169000,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'minivan',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/465decfb-55bd-4966-a376-310bd1ed765f-768x1365.jpg'],
    },
    {
      brand: 'Fiat',
      model: 'Strada',
      version: 'Adventure 1.8',
      year: 2015,
      price: 67900,
      mileage: 169000,
      fuel: 'flex',
      transmission: 'automatizado',
      bodyType: 'picape',
      doors: 2,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/8bc23bbc-087d-4264-980f-758c67cacce9-768x1365.jpg'],
    },
    {
      brand: 'Fiat',
      model: 'Fiorino',
      version: 'Endurance 1.3',
      year: 2023,
      price: 88900,
      mileage: 88000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'furgao',
      doors: 2,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2026/01/2322ad3c-f209-4b89-b317-71ae7735d70a-768x1024.jpg'],
    },
    {
      brand: 'Chevrolet',
      model: 'Meriva',
      version: 'Premium 1.8',
      year: 2009,
      price: 31900,
      mileage: 205000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'minivan',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2025/12/7e7b15b7-4171-4881-9604-e1715c246e6d-768x1365.jpg'],
    },
    {
      brand: 'Fiat',
      model: 'Strada',
      version: 'Freedom 1.3 CS',
      year: 2024,
      price: 97900,
      mileage: 39000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'picape',
      doors: 2,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2025/11/c97ed6a9-c430-43e8-a1f5-145f047a8fd8-768x1365.jpg'],
    },
    {
      brand: 'Volkswagen',
      model: 'Golf',
      version: 'Highline 1.4 TSI',
      year: 2017,
      price: 104900,
      mileage: 67000,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'hatch',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2025/11/ebc42532-741e-4b04-800c-e3cb62fb1ba6-768x1365.jpeg'],
    },
    {
      brand: 'Jeep',
      model: 'Renegade',
      version: '1.3 T270',
      year: 2023,
      price: 109900,
      mileage: 79000,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'suv',
      doors: 4,
      featured: true,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2025/11/3edcfaef-f269-465b-a841-37636a8df66c-768x1365.jpeg'],
    },
    {
      brand: 'Volkswagen',
      model: 'Golf',
      version: 'Highline TSI 1.4',
      year: 2015,
      price: 84900,
      mileage: 168000,
      fuel: 'flex',
      transmission: 'automatico',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2025/11/56433d90-5bb6-4c39-9721-ccc88e25d2a9-768x1365.jpeg'],
    },
    {
      brand: 'Volkswagen',
      model: 'Golf',
      version: 'Sportline 1.6',
      year: 2011,
      price: 51900,
      mileage: 230000,
      fuel: 'flex',
      transmission: 'manual',
      bodyType: 'hatch',
      doors: 4,
      featured: false,
      images: ['https://pumamultimarcasmatao.com.br/wp-content/uploads/2025/11/88fbd693-5689-45c3-8835-4ecddb14a752-768x1365.jpeg'],
    },
  ]

  for (const vehicleData of vehicles) {
    const { images, ...vehicleInfo } = vehicleData

    const vehicle = await prisma.vehicle.create({
      data: {
        ...vehicleInfo,
        images: {
          create: images.map((url, index) => ({
            url,
            order: index,
          })),
        },
      },
    })

    console.log(`Vehicle created: ${vehicle.brand} ${vehicle.model} ${vehicle.year}`)
  }

  console.log(`\n✅ Database seeded successfully with ${vehicles.length} vehicles!`)
}

main()
  .catch((e) => {
    console.error(e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
